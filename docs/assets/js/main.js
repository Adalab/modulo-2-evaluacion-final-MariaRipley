"use strict";const ulElement=document.querySelector(".js_character_list"),ulFavourites=document.querySelector(".js_character_fav"),url="https://dev.adalab.es/api/disney?pageSize=15";let listCharactersApi=[],listCharacterFavourites=[];const favLS=JSON.parse(localStorage.getItem("favCharacters"));function init(){favLS&&(listCharacterFavourites=favLS,renderFavouritesList(listCharacterFavourites))}function renderCharacterList(e){ulElement.innerHTML="";for(const r of e)ulElement.innerHTML+=renderCharacter(r,!1);addEventCharacter()}function addEventCharacter(){const e=document.querySelectorAll(".js_li_card");for(const r of e)r.addEventListener("click",handleClick)}function renderCharacter(e,r){if(null!==e){let t=e.imageUrl;const a=e.name,s=e._id,c="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney";t||(t=c);let i="",n=`<li id="${s}" class="card js_li_card">${`<div class="cardDiv">\n         <img src="${t}" alt="" class="card__img" />\n         <p class="card__text">${a}</p>\n         </div>`}</li>`,l=`<li id="${s}" class="card js_li_card favourite">${`<div class="cardDiv"><a  class="deleteX">X</a>\n         <img src="${t}" alt="" class="card__img" />\n         <p class="card__text">${a}</p>\n         </div>`}</li>`;return r?i+=l:i=n,i}}function handleClick(e){const r=parseInt(e.currentTarget.id),t=listCharactersApi.find(e=>e._id===r),a=listCharacterFavourites.findIndex(e=>e._id===r);-1===a?listCharacterFavourites.push(t):listCharacterFavourites.splice(a,1),localStorage.setItem("favCharacters",JSON.stringify(listCharacterFavourites)),renderFavouritesList()}function renderFavouritesList(){ulFavourites.innerHTML="";for(const e of listCharacterFavourites)ulFavourites.innerHTML+=renderCharacter(e,!0)}init(),fetch(url).then(e=>e.json()).then(e=>{console.log(e),listCharactersApi=e.data,renderCharacterList(listCharactersApi)});const searchInput=document.querySelector(".js_search_input"),searchBtn=document.querySelector(".js_search_btn");function handleClickSearch(e){e.preventDefault();const r=searchInput.value;renderCharacterList(listCharactersApi.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())))}searchBtn.addEventListener("click",handleClickSearch);