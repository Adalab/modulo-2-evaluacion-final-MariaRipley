"use strict";const ulElement=document.querySelector(".js_character_list"),ulFavourites=document.querySelector(".js_character_fav"),url="https://api.disneyapi.dev/character?pageSize=50";let listCharactersApi=[],listCharacterFavourites=[];const favLS=JSON.parse(localStorage.getItem("favCharacters"));function init(){favLS&&(listCharacterFavourites=favLS,renderFavouritesList(listCharacterFavourites))}function renderCharacterList(e){ulElement.innerHTML="";for(const t of e)ulElement.appendChild(renderCharacter(t,!1));addEventCharacter()}function addEventCharacter(){const e=document.querySelectorAll(".js_li_card");for(const t of e)t.addEventListener("click",handleClick)}function renderCharacter(e,t){if(null!==e){let r=e.imageUrl;const a=e.name,c=e._id,n="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney";r||(r=n);const s=document.createElement("p");s.setAttribute("class","card__text");const i=document.createTextNode(""+a);s.appendChild(i);const l=document.createElement("img");l.src=""+r,l.alt="Imagen de un personaje Disney",l.setAttribute("class","card__img");const d=document.createElement("div");d.setAttribute("class","cardDiv"),d.appendChild(l),d.appendChild(s);const o=document.createElement("li");o.id=""+c,o.setAttribute("class","card js_li_card"),o.appendChild(d);const u=document.createElement("p");u.setAttribute("class","card__text");const h=document.createTextNode(""+a);u.appendChild(h);const p=document.createElement("a");p.id=""+c,p.setAttribute("class","deleteX");const m=document.createTextNode("X");p.appendChild(m);const C=document.createElement("img");C.src=""+r,C.alt="Imagen de un personaje Disney",C.setAttribute("class","card__img");const v=document.createElement("div");v.setAttribute("class","cardDiv"),v.appendChild(p),v.appendChild(C),v.appendChild(u);const f=document.createElement("li");return f.setAttribute("class","card favourite"),f.appendChild(v),t?f:o}}function handleClick(e){const t=parseInt(e.currentTarget.id),r=listCharactersApi.find(e=>e._id===t),a=listCharacterFavourites.findIndex(e=>e._id===t);-1===a?listCharacterFavourites.push(r):listCharacterFavourites.splice(a,1),localStorage.setItem("favCharacters",JSON.stringify(listCharacterFavourites)),renderFavouritesList()}function renderFavouritesList(){ulFavourites.innerHTML="";for(const e of listCharacterFavourites)ulFavourites.appendChild(renderCharacter(e,!0));addEventDelete()}init(),fetch(url).then(e=>e.json()).then(e=>{console.log(e),listCharactersApi=e.data,renderCharacterList(listCharactersApi)});const searchInput=document.querySelector(".js_search_input"),searchBtn=document.querySelector(".js_search_btn");function handleClickSearch(e){e.preventDefault();const t=searchInput.value;renderCharacterList(listCharactersApi.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())))}function addEventDelete(){const e=document.querySelectorAll(".deleteX");for(const t of e)t.addEventListener("click",handleClick)}searchBtn.addEventListener("click",handleClickSearch);const deleteButton=document.querySelector(".js_deleteAll");function handleDeleteAll(){localStorage.clear(),listCharacterFavourites=[],renderFavouritesList()}deleteButton.addEventListener("click",handleDeleteAll);